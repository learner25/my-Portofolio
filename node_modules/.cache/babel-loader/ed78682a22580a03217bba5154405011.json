{"ast":null,"code":"import ReactDOM from\"react-dom\";import React,{Suspense,useEffect,useRef,useMemo}from\"react\";import{Canvas,Dom,useLoader,useFrame}from\"react-three-fiber\";import{TextureLoader,LinearFilter}from\"three\";import lerp from\"lerp\";import{Text,MultilineText}from\"./components/Text\";import Diamonds from\"./diamonds/Diamonds\";import Plane from\"./components/Plane\";import{Block,useBlock}from\"./blocks\";import state from\"./store\";import\"./styles.css\";function Startup(){var ref=useRef();useFrame(function(){return ref.current.material.opacity=lerp(ref.current.material.opacity,0,0.025);});return/*#__PURE__*/React.createElement(Plane,{ref:ref,color:\"#0e0e0f\",position:[0,0,200],scale:[100,100,1]});}function Paragraph(_ref){var image=_ref.image,index=_ref.index,offset=_ref.offset,factor=_ref.factor,header=_ref.header,aspect=_ref.aspect,text=_ref.text;var _useBlock=useBlock(),w=_useBlock.contentMaxWidth,canvasWidth=_useBlock.canvasWidth,margin=_useBlock.margin,mobile=_useBlock.mobile;var size=aspect<1&&!mobile?0.65:1;var alignRight=(canvasWidth-w*size-margin)/2;var pixelWidth=w*state.zoom*size;var left=!(index%2);var color=index%2?\"#D40749\":\"#2FE8C3\";return/*#__PURE__*/React.createElement(Block,{factor:factor,offset:offset},/*#__PURE__*/React.createElement(\"group\",{position:[left?-alignRight:alignRight,0,0]},/*#__PURE__*/React.createElement(Plane,{map:image,args:[1,1,32,32],shift:200,size:size,aspect:aspect,scale:[w*size,w*size/aspect,1],frustumCulled:false}),/*#__PURE__*/React.createElement(Dom,{style:{width:pixelWidth/(mobile?1:2),textAlign:left?\"left\":\"right\"},position:[left||mobile?-w*size/2:0,-w*size/2/aspect-0.4,1]},text),/*#__PURE__*/React.createElement(Text,{left:left,right:!left,size:w*0.04,color:color,top:true,position:[(left?-w:w)*size/2,w*size/aspect/2+0.5,-1]},header),/*#__PURE__*/React.createElement(Block,{factor:0.2},/*#__PURE__*/React.createElement(Text,{opacity:0.5,size:w*0.1,color:\"#1A1E2A\",position:[(left?w:-w)/2*size,w*size/aspect/1.5,-10]},\"0\"+(index+1)))));}function Content(){var images=useLoader(TextureLoader,state.paragraphs.map(function(_ref2){var image=_ref2.image;return image;}));useMemo(function(){return images.forEach(function(texture){return texture.minFilter=LinearFilter;});},[images]);var _useBlock2=useBlock(),w=_useBlock2.contentMaxWidth,canvasWidth=_useBlock2.canvasWidth,canvasHeight=_useBlock2.canvasHeight,mobile=_useBlock2.mobile;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Block,{factor:1,offset:0},/*#__PURE__*/React.createElement(Block,{factor:1.2},/*#__PURE__*/React.createElement(Text,{left:true,size:w*0.08,position:[-w/3.2,0.5,-1],color:\"#d40749\"},\"Saimon's Planet\")),/*#__PURE__*/React.createElement(Block,{factor:1.0},/*#__PURE__*/React.createElement(Dom,{position:[-w/3.2,-w*0.08+0.25,-1]},\"It was the year 2076.\",mobile?/*#__PURE__*/React.createElement(\"br\",null):\" \",\"The substance had arrived.\"))),/*#__PURE__*/React.createElement(Block,{factor:1.2,offset:5.7},/*#__PURE__*/React.createElement(MultilineText,{top:true,left:true,size:w*0.15,lineHeight:w/5,position:[-w/3.5,0,-1],color:\"#2fe8c3\",text:\"four\\nzero\\nzero\"})),state.paragraphs.map(function(props,index){return/*#__PURE__*/React.createElement(Paragraph,Object.assign({key:index,index:index},props,{image:images[index]}));}),state.stripes.map(function(_ref3,index){var offset=_ref3.offset,color=_ref3.color,height=_ref3.height;return/*#__PURE__*/React.createElement(Block,{key:index,factor:-1.5,offset:offset},/*#__PURE__*/React.createElement(Plane,{args:[50,height,32,32],shift:-4,color:color,rotation:[0,0,Math.PI/8],position:[0,0,-10]}));}),/*#__PURE__*/React.createElement(Block,{factor:1.25,offset:8},/*#__PURE__*/React.createElement(Dom,{className:\"bottom-left\",position:[-canvasWidth/2,-canvasHeight/2,0]},\"Culture is not your friend.\")));}function App(){var scrollArea=useRef();var onScroll=function onScroll(e){return state.top.current=e.target.scrollTop;};useEffect(function(){return void onScroll({target:scrollArea.current});},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Canvas,{concurrent:true,pixelRatio:1,orthographic:true,camera:{zoom:state.zoom,position:[0,0,500]}},/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(Dom,{center:true,className:\"loading\",children:\"Loading...\"})},/*#__PURE__*/React.createElement(Content,null),/*#__PURE__*/React.createElement(Diamonds,null),/*#__PURE__*/React.createElement(Startup,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"scrollArea\",ref:scrollArea,onScroll:onScroll},new Array(state.sections).fill().map(function(_,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,id:\"0\"+index,style:{height:\"\".concat(state.pages/state.sections*100,\"vh\")}});})),/*#__PURE__*/React.createElement(\"div\",{className:\"frame\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"frame__title\"},\"Scroll, Refraction and Shader Effects\"),/*#__PURE__*/React.createElement(\"div\",{className:\"frame__links\"},/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"http://tympanus.net/Tutorials/PhysicsMenu/\"},\"Previous demo\"),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"https://tympanus.net/codrops/?p=45441\"},\"Article\"),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"https://github.com/drcmda/the-substance\"},\"GitHub\")),/*#__PURE__*/React.createElement(\"div\",{className:\"frame__nav\"},/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#00\",children:\"intro\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#01\",children:\"01\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#02\",children:\"02\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#03\",children:\"03\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#04\",children:\"04\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#05\",children:\"05\"}),/*#__PURE__*/React.createElement(\"a\",{className:\"frame__link\",href:\"#07\",children:\"06\"}))));}ReactDOM.render(/*#__PURE__*/React.createElement(App,null),document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/Admin/Downloads/the-substance-master/src/index.js"],"names":["ReactDOM","React","Suspense","useEffect","useRef","useMemo","Canvas","Dom","useLoader","useFrame","TextureLoader","LinearFilter","lerp","Text","MultilineText","Diamonds","Plane","Block","useBlock","state","Startup","ref","current","material","opacity","Paragraph","image","index","offset","factor","header","aspect","text","w","contentMaxWidth","canvasWidth","margin","mobile","size","alignRight","pixelWidth","zoom","left","color","width","textAlign","Content","images","paragraphs","map","forEach","texture","minFilter","canvasHeight","props","stripes","height","Math","PI","App","scrollArea","onScroll","e","top","target","scrollTop","position","Array","sections","fill","_","pages","render","document","getElementById"],"mappings":"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","sourcesContent":["import ReactDOM from \"react-dom\"\nimport React, { Suspense, useEffect, useRef, useMemo } from \"react\"\nimport { Canvas, Dom, useLoader, useFrame } from \"react-three-fiber\"\nimport { TextureLoader, LinearFilter } from \"three\"\nimport lerp from \"lerp\"\nimport { Text, MultilineText } from \"./components/Text\"\nimport Diamonds from \"./diamonds/Diamonds\"\nimport Plane from \"./components/Plane\"\nimport { Block, useBlock } from \"./blocks\"\nimport state from \"./store\"\nimport \"./styles.css\"\n\nfunction Startup() {\n  const ref = useRef()\n  useFrame(() => (ref.current.material.opacity = lerp(ref.current.material.opacity, 0, 0.025)))\n  return <Plane ref={ref} color=\"#0e0e0f\" position={[0, 0, 200]} scale={[100, 100, 1]} />\n}\n\nfunction Paragraph({ image, index, offset, factor, header, aspect, text }) {\n  const { contentMaxWidth: w, canvasWidth, margin, mobile } = useBlock()\n  const size = aspect < 1 && !mobile ? 0.65 : 1\n  const alignRight = (canvasWidth - w * size - margin) / 2\n  const pixelWidth = w * state.zoom * size\n  const left = !(index % 2)\n  const color = index % 2 ? \"#D40749\" : \"#2FE8C3\"\n  return (\n    <Block factor={factor} offset={offset}>\n      <group position={[left ? -alignRight : alignRight, 0, 0]}>\n        <Plane map={image} args={[1, 1, 32, 32]} shift={200} size={size} aspect={aspect} scale={[w * size, (w * size) / aspect, 1]} frustumCulled={false} />\n        <Dom\n          style={{ width: pixelWidth / (mobile ? 1 : 2), textAlign: left ? \"left\" : \"right\" }}\n          position={[left || mobile ? (-w * size) / 2 : 0, (-w * size) / 2 / aspect - 0.4, 1]}>\n          {text}\n        </Dom>\n        <Text left={left} right={!left} size={w * 0.04} color={color} top position={[((left ? -w : w) * size) / 2, (w * size) / aspect / 2 + 0.5, -1]}>\n          {header}\n        </Text>\n        <Block factor={0.2}>\n          <Text opacity={0.5} size={w * 0.1} color=\"#1A1E2A\" position={[((left ? w : -w) / 2) * size, (w * size) / aspect / 1.5, -10]}>\n            {\"0\" + (index + 1)}\n          </Text>\n        </Block>\n      </group>\n    </Block>\n  )\n}\n\nfunction Content() {\n  const images = useLoader(\n    TextureLoader,\n    state.paragraphs.map(({ image }) => image)\n  )\n  useMemo(() => images.forEach(texture => (texture.minFilter = LinearFilter)), [images])\n  const { contentMaxWidth: w, canvasWidth, canvasHeight, mobile } = useBlock()\n  return (\n    <>\n      <Block factor={1} offset={0}>\n        <Block factor={1.2}>\n          <Text left size={w * 0.08} position={[-w / 3.2, 0.5, -1]} color=\"#d40749\">\n           Saimon's Planet\n          </Text>\n        </Block>\n        <Block factor={1.0}>\n          <Dom position={[-w / 3.2, -w * 0.08 + 0.25, -1]}>It was the year 2076.{mobile ? <br /> : \" \"}The substance had arrived.</Dom>\n        </Block>\n      </Block>\n      <Block factor={1.2} offset={5.7}>\n        <MultilineText top left size={w * 0.15} lineHeight={w / 5} position={[-w / 3.5, 0, -1]} color=\"#2fe8c3\" text={\"four\\nzero\\nzero\"} />\n      </Block>\n      {state.paragraphs.map((props, index) => (\n        <Paragraph key={index} index={index} {...props} image={images[index]} />\n      ))}\n      {state.stripes.map(({ offset, color, height }, index) => (\n        <Block key={index} factor={-1.5} offset={offset}>\n          <Plane args={[50, height, 32, 32]} shift={-4} color={color} rotation={[0, 0, Math.PI / 8]} position={[0, 0, -10]} />\n        </Block>\n      ))}\n      <Block factor={1.25} offset={8}>\n        <Dom className=\"bottom-left\" position={[-canvasWidth / 2, -canvasHeight / 2, 0]}>\n          Culture is not your friend.\n        </Dom>\n      </Block>\n    </>\n  )\n}\n\nfunction App() {\n  const scrollArea = useRef()\n  const onScroll = e => (state.top.current = e.target.scrollTop)\n  useEffect(() => void onScroll({ target: scrollArea.current }), [])\n  return (\n    <>\n      <Canvas concurrent pixelRatio={1} orthographic camera={{ zoom: state.zoom, position: [0, 0, 500] }}>\n        <Suspense fallback={<Dom center className=\"loading\" children=\"Loading...\" />}>\n          <Content />\n          <Diamonds />\n          <Startup />\n        </Suspense>\n      </Canvas>\n      <div className=\"scrollArea\" ref={scrollArea} onScroll={onScroll}>\n        {new Array(state.sections).fill().map((_, index) => (\n          <div key={index} id={\"0\" + index} style={{ height: `${(state.pages / state.sections) * 100}vh` }} />\n        ))}\n      </div>\n      <div className=\"frame\">\n        <h1 className=\"frame__title\">Scroll, Refraction and Shader Effects</h1>\n        <div className=\"frame__links\">\n          <a className=\"frame__link\" href=\"http://tympanus.net/Tutorials/PhysicsMenu/\">\n            Previous demo\n          </a>\n          <a className=\"frame__link\" href=\"https://tympanus.net/codrops/?p=45441\">\n            Article\n          </a>\n          <a className=\"frame__link\" href=\"https://github.com/drcmda/the-substance\">\n            GitHub\n          </a>\n        </div>\n        <div className=\"frame__nav\">\n          <a className=\"frame__link\" href=\"#00\" children=\"intro\" />\n          <a className=\"frame__link\" href=\"#01\" children=\"01\" />\n          <a className=\"frame__link\" href=\"#02\" children=\"02\" />\n          <a className=\"frame__link\" href=\"#03\" children=\"03\" />\n          <a className=\"frame__link\" href=\"#04\" children=\"04\" />\n          <a className=\"frame__link\" href=\"#05\" children=\"05\" />\n          <a className=\"frame__link\" href=\"#07\" children=\"06\" />\n        </div>\n      </div>\n    </>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"]},"metadata":{},"sourceType":"module"}